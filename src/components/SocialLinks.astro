---
import ContactUsAt from './ContactUsAt.astro';

export interface SocialLink {
  name: string;
  url: string;
  icon: string;
  color: string;
  textColor: string;
  description: string;
  iconOnly?: boolean; // If true, only shows in icon rendering (sidebar/footer), not in contact cards
}

export interface Props {
  title?: string;
  links?: SocialLink[];
  variant?: "sidebar" | "footer" | "contact";
  className?: string;
}

// Default social links - can be overridden via props
const defaultSocialLinks: SocialLink[] = [
  {
    name: "Discord",
    url: "https://discord.gg/BZA3pxppq9",
    icon: `<path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"></path>`,
    color: "bg-jpmc-blue",
    textColor: "text-jpmc-blue hover:text-jpmc-blue-700",
    description: "Join our Discord community for real-time discussions and updates"
  },
  {
    name: "YouTube",
    url: "https://www.youtube.com/@jpmcWorkers",
    icon: `<path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path>`,
    color: "bg-jpmc-red",
    textColor: "text-jpmc-red hover:text-jpmc-red-700",
    description: "Watch our videos and stay updated with our latest content"
  },
  {
    name: "Reddit",
    url: "https://www.reddit.com/user/JPMCWorkers/",
    icon: `<path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"></path>`,
    color: "bg-jpmc-gold",
    textColor: "text-jpmc-gold hover:text-jpmc-gold-700",
    description: "Follow our Reddit profile for discussions and community updates"
  },
  {
    name: "Instagram",
    url: "https://www.instagram.com/jpmcworkers",
    icon: `<path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.62 5.367 11.987 11.988 11.987 6.62 0 11.987-5.367 11.987-11.987C24.014 5.367 18.637.001 12.017.001zM8.449 16.988c-1.297 0-2.448-.49-3.323-1.297C4.198 14.895 3.708 13.744 3.708 12.447s.49-2.448 1.418-3.323c.875-.807 2.026-1.297 3.323-1.297s2.448.49 3.323 1.297c.928.875 1.418 2.026 1.418 3.323s-.49 2.448-1.418 3.244c-.875.807-2.026 1.297-3.323 1.297zm7.83-9.781c-.49 0-.928-.175-1.297-.49-.368-.315-.49-.753-.49-1.243 0-.49.122-.928.49-1.243.369-.315.807-.49 1.297-.49s.928.175 1.297.49c.368.315.49.753.49 1.243 0 .49-.122.928-.49 1.243-.369.315-.807.49-1.297.49z"></path>`,
    color: "bg-gradient-to-r from-purple-500 to-pink-500",
    textColor: "text-purple-500 hover:text-purple-600",
    description: "Follow us on Instagram for visual updates and behind-the-scenes content"
  },
  {
    name: "Email",
    url: "mailto:jpmcworkers@gmail.com",
    icon: `<path d="M1.5 8.67v8.58a3 3 0 003 3h15a3 3 0 003-3V8.67l-8.928 5.493a3 3 0 01-3.144 0L1.5 8.67z" /><path d="M22.5 6.908V6.75a3 3 0 00-3-3h-15a3 3 0 00-3 3v.158l9.714 5.978a1.5 1.5 0 001.572 0L22.5 6.908z" />`,
    color: "bg-jpmc-blue",
    textColor: "text-jpmc-blue hover:text-jpmc-blue-700",
    description: "Send us an email at jpmcworkers@gmail.com",
    iconOnly: true
  }
];

const {
  title = "Connect With Us",
  links = defaultSocialLinks,
  variant = "sidebar",
  className = ""
} = Astro.props;

// Variant-specific configurations
const variantConfig = {
  sidebar: {
    iconSize: "w-5 h-5",
    titleClass: "text-sm font-medium text-jpmc-dark dark:text-gray-200 uppercase tracking-wide mb-3",
    containerClass: "mt-8 pt-6 border-t border-gray-200",
    linkClass: "transition-colors"
  },
  footer: {
    iconSize: "w-6 h-6",
    titleClass: "font-semibold text-jpmc-gold",
    containerClass: "space-y-4",
    linkClass: "transition-colors"
  },
  contact: {
    iconSize: "w-8 h-8",
    titleClass: "text-2xl font-bold text-jpmc-dark mb-6",
    containerClass: "",
    linkClass: "transition-all duration-300"
  }
};



const config = variantConfig[variant];
---

<div class={`${config.containerClass} ${className}`}>
  <h3 class={config.titleClass}>
    {Astro.slots.title ? <slot name="title" /> : title}
  </h3>
  
  {variant === "contact" ? (
    <!-- Contact page flex layout -->
    <div class="flex flex-wrap justify-center gap-6">
      {links.filter(link => !link.iconOnly).map((link) => (
        <ContactUsAt
          color={link.color}
          svg={link.icon}
          title={link.name}
          buttonText={link.url.startsWith('mailto:') ? `Send ${link.name}` : `Visit ${link.name}`}
          description={link.description}
          link={link.url}
        />
      ))}
    </div>
  ) : (
    <!-- Sidebar/Footer icon-only layout -->
    <div class={`flex ${variant === "footer" ? "space-x-4" : "space-x-3"}`}>
      {links.map((link) => (
        <a
          href={link.url}
          target={link.url.startsWith('mailto:') ? undefined : "_blank"}
          rel={link.url.startsWith('mailto:') ? undefined : "noopener noreferrer"}
          class={`${config.linkClass} ${link.textColor}`}
          title={link.name}
        >
          <span class="sr-only">{link.name}</span>
          <svg class={config.iconSize} fill="currentColor" viewBox="0 0 24 24" set:html={link.icon} />
        </a>
      ))}
    </div>
  )}
</div>
